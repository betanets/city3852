<!DOCTYPE html>
<html 
    lang="en" xmlns:th="http://www.thymeleaf.org"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
    <head>
        <link rel="stylesheet" href="https://openlayers.org/en/v4.4.2/css/ol.css" type="text/css">
        <!-- The line below is only needed for old environments like Internet Explorer and Android 4.x -->
        <script type="text/javascript" src="https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL"></script>
        <script type="text/javascript" src="https://openlayers.org/en/v4.4.2/build/ol.js"></script>
        <script type="text/javascript" th:src="@{/resources/js/jquery-1.10.2.min.js}"></script>
    </head>
    <body>
        <section layout:fragment="content">
            <div id="map" class="map">
            </div>
            <div id="markersContent">
                <!-- markers content is in markers.html -->
            </div>
        
            <script th:inline="javascript">
                $(document).ready(function(){
                    getMarkers();
                    setInterval(getMarkers, 10000);
                });
        
                function getMarkers(){
                    path = /*[[@{/markers}]]*/;
                    $.ajax({
                        url: path,
                        type: 'get',
                        success: function (html) {
                            $("#markersContent").html(html);
                        }
                    });
                }
                
                var map = new ol.Map({
                    layers: [
                        new ol.layer.Tile({
                            source: new ol.source.OSM()
                        })
                    ],
                    target: 'map',
                    view: new ol.View({
                        center: new ol.proj.fromLonLat([83.7625, 53.3502]),
                        zoom: 14
                    })
                });

                var imageStyle = new ol.style.Style({
                    image: new ol.style.Circle({
                        radius: 5,
                        snapToPixel: false,
                        fill: new ol.style.Fill({color: 'yellow'}),
                        stroke: new ol.style.Stroke({color: 'red', width: 1})
                    })
                });
            </script>
        </section>
    </body>
</html>